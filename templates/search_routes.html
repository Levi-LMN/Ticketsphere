{% extends "base.html" %}

{% block content %}
    <h1>Search Routes</h1>

    <form method="post">
        {{ form.csrf_token }}
        {{ form.hidden_tag() }}
        <label for="origin">Origin:</label>
        {{ form.origin }}
        <label for="destination">Destination:</label>
        {{ form.destination }}
        {{ form.submit }}
    </form>

    <p>or</p>

    <a href="{{ url_for('route_list') }}">View All Routes</a>

    <!-- Display search results -->
    <ul>
        {% for route in routes %}
            <li>
                <a href="{{ url_for('route_detail', route_id=route.id) }}">
                    {{ route.name }} ({{ route.origin }} to {{ route.destination }})
                </a>
                {% if route.vehicles %}
                    <ul>
                        {% for vehicle in route.vehicles %}
                            <li>
                                Sacco: {{ vehicle.sacco.name }}
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>No vehicles associated with this route.</p>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endblock %}
